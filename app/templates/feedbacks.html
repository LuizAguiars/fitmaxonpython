<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/feedbacks.css') }}">
  <title>Enviar Feedback</title>
</head>
<body>
  <img src="{{ url_for('static', filename='IMG/fundo.jpg') }}" alt="fITMAX">

  <div class="container">
    <h2>Enviar Feedback</h2>
    <form method="POST" action="{{ url_for('enviar_feedback') }}">
      <div class="stars" id="stars">
        <span class="star" data-value="5">&#9733;</span>
        <span class="star" data-value="4">&#9733;</span>
        <span class="star" data-value="3">&#9733;</span>
        <span class="star" data-value="2">&#9733;</span>
        <span class="star" data-value="1">&#9733;</span>
      </div>
      <input type="hidden" name="nota" id="nota" value="0">

      <div id="feedback-negativo" class="feedback-opcoes hidden">
        <strong>O que poderia ser melhorado?</strong>
        <label><input type="checkbox" name="motivos[]" value="Equipamentos quebrados"> Equipamentos quebrados</label>
        <label><input type="checkbox" name="motivos[]" value="Falta de limpeza"> Falta de limpeza</label>
        <label><input type="checkbox" name="motivos[]" value="Atendimento ruim"> Atendimento ruim</label>
        <label><input type="checkbox" name="motivos[]" value="Atrasos nas aulas"> Atrasos nas aulas</label>
        <label><input type="checkbox" name="motivos[]" value="Pouca variedade de equipamentos"> Pouca variedade de equipamentos</label>
        <label><input type="checkbox" name="motivos[]" value="Ambiente barulhento"> Ambiente barulhento</label>
      </div>
      
      <div id="feedback-positivo" class="feedback-opcoes hidden">
        <strong>Como foi sua experiência?</strong>
        <label><input type="checkbox" name="elogios[]" value="Ambiente agradável"> Ambiente agradável</label>
        <label><input type="checkbox" name="elogios[]" value="Equipamentos em bom estado"> Equipamentos em bom estado</label>
        <label><input type="checkbox" name="elogios[]" value="Personal bem capacitado"> Personal bem capacitado</label>
        <label><input type="checkbox" name="elogios[]" value="Atendimento atencioso"> Atendimento atencioso</label>
        <label><input type="checkbox" name="elogios[]" value="Variedade de aulas"> Variedade de aulas</label>
        <label><input type="checkbox" name="elogios[]" value="Limpeza e organização"> Limpeza e organização</label>
      </div>
      <br>
      <br>

      <label for="comentario">Comentário (opcional):</label>
      <textarea name="comentario" id="comentario" placeholder="Deixe um Comentário!"></textarea>

      <button type="submit">Enviar</button>
    </form>
  </div>

  <script>
        const stars = document.querySelectorAll('.star');
    const notaInput = document.getElementById('nota');
    const feedbackNegativo = document.getElementById('feedback-negativo');
    const feedbackPositivo = document.getElementById('feedback-positivo');
    let selectedRating = 0;

    function updateStars(hoverValue = 0) {
      stars.forEach(star => {
        const value = parseInt(star.dataset.value);
        star.classList.remove('hovered', 'selected');
        if (hoverValue > 0 && value <= hoverValue) {
          star.classList.add('hovered');
        } else if (selectedRating > 0 && value <= selectedRating) {
          star.classList.add('selected');
        }
      });
    }

    function atualizarFeedbackCampos(nota) {
      if (nota >= 1 && nota <= 3) {
        feedbackNegativo.classList.remove('hidden');
        feedbackPositivo.classList.add('hidden');
      } else if (nota >= 4 && nota <= 5) {
        feedbackNegativo.classList.add('hidden');
        feedbackPositivo.classList.remove('hidden');
      } else {
        feedbackNegativo.classList.add('hidden');
        feedbackPositivo.classList.add('hidden');
      }
    }

    stars.forEach(star => {
      const value = parseInt(star.dataset.value);

      star.addEventListener('mouseenter', () => {
        updateStars(value);
      });

      star.addEventListener('mouseleave', () => {
        updateStars();
      });

      star.addEventListener('click', () => {
        selectedRating = value;
        notaInput.value = value;
        updateStars();
        atualizarFeedbackCampos(value);
      });
    });
     <h3 style="text-align: center; color: green;">Feedback enviado com sucesso!</h3>
  </script>
</body>
</html>
